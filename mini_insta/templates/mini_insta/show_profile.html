<!-- mini_insta/show_profile.html -->
<!-- website to show one of the profiles -->
<!-- Author: Yihang Duanmu (harrydm@bu.edu), 10/16/2025 -->

{% extends "mini_insta/base.html" %}

{% block content %}
<main>
    <div class="grid-container-detail">
        <img src={{profile.profile_image_url}} alt="profile_image">
        <div id="text">
            <h2>{{ profile.username }}</h2>
            <h3>{{ profile.display_name }}</h3>
            <p>
                {{profile.get_num_posts}} <b>Posts</b> &nbsp;&nbsp;
                <a href="{% url 'show_followers' profile.pk %}">{{profile.get_num_followers}} <b>Followers</b> </a>  &nbsp;&nbsp;
                <a href="{% url 'show_following' profile.pk %}">{{profile.get_num_following}} <b>Following</b> </a>
            </p>
            <br>
            <p>{{ profile.bio_text|linebreaks }}</p>
            <br>
            <p>Joined on {{ profile.join_date }}</p>
            {% if profile.user == request.user %}
                <div class="submit">
                    <a href="{% url 'update_profile' %}">
                        <input type="button" name="update" value="Update profile">
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
    <div id="post">
        <h2>Posts</h2>
        <br>
        <div id="post_image">
            {% for post in profile.get_all_posts %}
                {% if post.get_all_photos %}
                <a href="{% url 'show_post' post.pk %}">
                    <img src="{{ post.get_all_photos.0.get_image_url }}" alt="post image">
                </a>
                {% else %}
                    <a href="{% url 'show_post' post.pk %}">
                        <img src="https://static.vecteezy.com/system/resources/previews/004/141/669/original/no-photo-or-blank-image-icon-loading-images-or-missing-image-mark-image-not-available-or-image-coming-soon-sign-simple-nature-silhouette-in-frame-isolated-illustration-vector.jpg" alt="empty image">
                    </a>
                {% endif %}
            {% endfor %}
        </div>
    </div>
</main>
{% endblock %}